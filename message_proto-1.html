<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Standardbesked</title>

    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Include the compiled Ratchet CSS -->
    <link href="ratchet/css/ratchet.min.css" rel="stylesheet">
    
    <!-- Include custom styles -->
    <link href="css/main.css" rel="stylesheet">

    <!-- Include the compiled Ratchet JS -->
    <!-- 
    <script src="ratchet/js/ratchet.min.js"></script>
     -->
  </head>
  <body class="proto-1">

    <!-- Make sure all your bars are the first things in your <body> -->
    <header class="bar bar-nav">
      <!-- <a class="icon icon-left-nav pull-left" href="index.html">Beskeder</a> -->
      <a href="index.html">
        <button class="btn btn-link btn-nav pull-left">
          <span class="icon icon-left-nav"></span>
          Beskeder
        </button>
      </a>
      <div class="context-menu">
        <div class="wheel">
        </div>
        <p>Cykler</p>
      </div>
      <h1 class="title">Lars</h1>
    </header>

    <!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
    <div class="content">
      <ul class="messages">
        <li class="time"><strong>i dag</strong> 11.08</li>
        <li class="send-bubble">Hej Lars. Hvad tid kommer du hjem i dag?</li>
        <li class="receive-bubble">Hej Lotte. Jeg tænker det bliver omkring kl. 17.</li>
        
        <!--
        <li class="send-bubble">Okay, sejt!</li>
        <li class="receive-bubble">Har du forresten hørt at Christina har mistet sit job hos den lokale smed/blomsterbutik? De havde tilsyneladende ikke ressourcer til have hende som receptionist længere..</li>
        
        <li class="time"><strong>i dag</strong> 12.32</li>
        <li class="send-bubble">Forfærdeligt! Det er mener du var ikke vel?! Så har hun jo ingen fremtid..</li>
        <li class="receive-bubble">Nej, absolut ingen. Jeg er på grådens rand på hendes vegne. Ved knap nok hvor jeg skal gøre af mig selv.. Det er meget ubehageligt!</li> -->
      </ul>
    </div>    

    <!-- Icons in standard bar fixed to the bottom of the screen -->
    <div class="bar bar-standard bar-footer send-messages">
        <img class="icon-cam" src="img/ios-camera-icon.png" alt="camera" />
        <input class="write-message-input" type="text" placeholder="Tekstbesked">
        <a class="button_send disabled" onclick="sendMessage();">Send</a>
    </div>
    
    <script type="text/javascript">

      var textInput = document.querySelector('.write-message-input');
      var btnSend = document.querySelector('.button_send');

      function checkInputValue() {
        if (textInput.value) {
          btnSend.classList.remove('disabled'); // Remove disabled class if input has value
        } else {
          btnSend.classList.add('disabled'); // Add disabled class if input does not have value
        }
        window.setTimeout("checkInputValue();", 100);
      }

      checkInputValue();


      // Send messages
      var msgContainer = document.querySelector('.messages');

      function sendMessage() {
        var textInputValue = textInput.value; // Get value from input field
        var newMsgLi = document.createElement('li'); // Create new li for new message

        newMsgLi.className = 'send-bubble animate-in'; // Add class name to message li
        newMsgLi.innerHTML = textInputValue; // Input text message to message li
        msgContainer.appendChild(newMsgLi); // Append message li to message container

        textInput.value = ''; // Clear value for input field
        setTimeout(function() { scrollToBottom(); }, 600);
      }

      // Scroll to bottom
      function scrollToBottom() {
        var contentDiv = document.querySelector('.content');
        contentDiv.scrollTop = contentDiv.scrollHeight;
      }

      // 
      checkInputValue();
      scrollToBottom();

    </script>

  </body>
</html>